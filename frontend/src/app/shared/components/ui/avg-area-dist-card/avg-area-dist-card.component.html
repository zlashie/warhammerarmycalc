<app-card>
  <div class="chart-container">
    <div class="header">
      <h3 class="title">{{ title() }}</h3>
    </div>
    
    <hr class="card-divider">

    <div class="svg-wrapper">
      <svg [attr.viewBox]="'0 0 ' + WIDTH + ' ' + HEIGHT" preserveAspectRatio="xMidYMid meet">
        
        @for (line of gridLines(); track $index) {
          <line 
            [attr.x1]="PADDING.left" 
            [attr.y1]="line.y" 
            [attr.x2]="WIDTH - PADDING.right" 
            [attr.y2]="line.y" 
            stroke="#e0e0e0" 
            stroke-width="1"
          />
          <text 
            [attr.x]="PADDING.left - 10" 
            [attr.y]="line.y + 4" 
            text-anchor="end" 
            class="axis-label"
          >{{ line.value }}</text>
        }

        <path 
          [attr.d]="areaPath()" 
          fill="rgba(225, 173, 1, 0.2)" 
          stroke="none"
        />

        <path 
          [attr.d]="avgLinePath()" 
          fill="none" 
          stroke="#e1ad01" 
          stroke-width="4"
          stroke-linejoin="round"
          stroke-linecap="round"
        />

        @for (point of data(); track $index) {
          @if ($index % 2 === 0 || $index === data().length - 1) {
             <text 
              [attr.x]="PADDING.left + ($index / (data().length - 1)) * (WIDTH - PADDING.left - PADDING.right)" 
              [attr.y]="HEIGHT - PADDING.bottom + 20" 
              text-anchor="middle" 
              class="axis-label"
            >{{ point.xLabel }}</text>
          }
        }
        
        <text 
          [attr.x]="20" 
          [attr.y]="HEIGHT / 2" 
          transform="rotate(-90, 20, 200)" 
          text-anchor="middle"
          class="axis-title"
        >{{ yAxisLabel() }}</text>

        <text 
          [attr.x]="WIDTH / 2" 
          [attr.y]="HEIGHT - 10" 
          text-anchor="middle" 
          class="axis-title"
        >{{ xAxisLabel() }}</text>

      </svg>
    </div>
  </div>
</app-card>